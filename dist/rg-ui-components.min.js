!function(e){function n(n){n.decorator("GridOptions",["$delegate","i18nService",function(n,i){var t;return t=e.copy(n),t.initialize=function(e){var i;return i=n.initialize(e)},i.setCurrentLang("es"),t}])}e.module("uiComponents.config",[]).value("uiComponents.config",{debug:!0}).config(n),e.module("uiComponents.filters",[]),e.module("uiComponents.components",["ui.grid","ui.grid.exporter","ui.grid.selection","ui.grid.pagination","ui.grid.pinning","ui.grid.moveColumns","ui.grid.edit","ui.grid.rowEdit"]),e.module("uiComponents",["uiComponents.config","uiComponents.components","uiComponents.filters"])}(angular),function(e){"use strict";function n(){return function(n,i){var t=[];if(e.isArray(n)){var o=Object.keys(i);n.forEach(function(e){for(var n=!1,a=0;a<o.length;a++){var s=o[a],c=i[s].toLowerCase();if(-1!==e[s].toString().toLowerCase().indexOf(c)){n=!0;break}}n&&t.push(e)})}else t=n;return t}}e.module("uiComponents.filters").filter("propsFilter",n)}(angular),function(e){"use strict";e.module("uiComponents.filters",[])}(angular),function(e){"use strict";var n={restrict:"E",templateUrl:"/entidad-template.html",controller:"ListadoEntidadController as lrc",bindings:{selectAll:"=?",deselectedAll:"=?",entidades:"=?",entidadesSeleccionadas:"=?",servicio:"=?",gridOptions:"<",config:"<?",path:"<?",clickItem:"&?",metodos:"=?"}};e.module("uiComponents.components").component("listadoEntidad",n)}(angular),function(e){"use strict";function n(n,i,t,o,a,s,c){function d(){r(f.path,100,void 0,f.config.links)}function r(e,n,i,t){f.servicio.obtenerDatos(e,t,n,i).then(function(e){f.entidades=e,f.optionsEntidades.data=e,f.optionsEntidades.totalItems=f.entidades.length,l()})}function l(){f.selectAll&&(f.gridApi.grid.modifyRows(f.optionsEntidades.data),f.gridApi.selection.selectAllRows())}function u(){console.log(f.optionsEntidades),f.optionsEntidades.onRegisterApi=function(n){f.gridApi=n,n.expandable.on.rowExpandedStateChanged(i,function(n){n.isExpanded&&(n.entity.subGridOptions=e.copy(f.optionsEntidades.subGridColumnDefs),f.servicio.obtenerDatosSubgrilla(n.entity._links[f.config.subGrilla].href).then(function(e){n.entity.subGridOptions.data=e}))}),n.pagination.on.paginationChanged(i,function(){}),n.selection.on.rowSelectionChanged(i,function(){f.entidadesSeleccionadas=n.selection.getSelectedRows(),"undefined"!=typeof f.clickItem&&f.clickItem({$entidad:f.entidadesSeleccionadas,$entidadesSeleccionadas:f.entidadesSeleccionadas})}),n.selection.on.rowSelectionChangedBatch(i,function(){f.entidadesSeleccionadas=n.selection.getSelectedRows(),"undefined"!=typeof f.clickItem&&f.clickItem({$entidad:f.entidadesSeleccionadas,$entidadesSeleccionadas:f.entidadesSeleccionadas})}),p&&t(function(){l()},150)}}var p=!1,f=this;f.$onInit=function(){f.selected={},f.deselectedAll=!1,c.setCurrentLang("es"),f.gridApi=null,f.optionsEntidades=e.copy(f.gridOptions),f.metodosInternos=f.metodos||{},f.metodosInternos.actualizarDatos=d,void 0===f.entidades||0===f.entidades.length?r(f.path,100,void 0,f.config.links):(p=!0,f.optionsEntidades.data=f.entidades),u()}}e.module("uiComponents.components").controller("ListadoEntidadController",n)}(angular),function(e){"use strict";var n={restrict:"E",template:'<ui-select class="btn-group bootstrap-select form-control" search-enabled="sc.searchEnabled" ng-model="sc.ultimaEntidad" on-select="sc.onSelect($item)" ><ui-select-match placeholder="{{sc.configuracion.placeholder}}" popover-popup-delay="750" uib-popover="{{sc.configuracion.toolTip}}" popover-trigger="mouseenter" popover-placement="bottom">{{sc.cargarCampos($select)}}</ui-select-match><ui-select-choices repeat="entidad in sc.entidades | propsFilter: sc.getSearch($select)"><div><span>{{sc.configuracion.campos[0].title}} </span> <span ng-bind-html="entidad[sc.configuracion.campos[0].field] | highlight: $select.search"></span></div><small ng-repeat="subcampo in sc.configuracion.subcampos">{{subcampo.title}}: <span ng-bind-html="\'\'+ sc.byString(entidad,subcampo.field) | highlight: $select.search"></span><!--  email: {{person.email}}age: <span ng-bind-html="\'\'+person.age | highlight: $select.search">',controller:"SelectController as sc",bindings:{url:"<?",configuracion:"<?",searchEnabled:"<?",servicio:"<?",parametros:"<?",entidades:"<?",ultimaEntidad:"=?",clickItem:"&?"}};e.module("uiComponents.components").component("selectData",n)}(angular),function(e){"use strict";function n(){function e(e){var n={};return void 0===c.configuracion.fieldsToSearch?(c.configuracion.campos.forEach(function(i){n[i.field]=e.search}),c.configuracion.subcampos.forEach(function(i){n[i.field]=e.search})):c.configuracion.fieldsToSearch.forEach(function(i){n[i.field]=e.search}),n}function n(){return c.searchEnabled||!0}function i(){void 0===c.entidades||0===c.entidades.length?s():c.ultimaEntidad=void 0!==c.ultimaEntidad?c.ultimaEntidad:c.entidades[0]}function t(e){var n="";if(void 0!==e.selected){for(var i in c.configuracion.campos)n+=o(e.selected,c.configuracion.campos[i].field),n+=" - ";n=n.substr(0,n.length-3)}return n}function o(e,n){n=n.replace(/\[(\w+)\]/g,".$1"),n=n.replace(/^\./,"");for(var i=n.split("."),t=0,o=i.length;o>t;++t){var a=i[t];if(!(a in e))return;e=e[a]}return e}function a(e){c.clickItem({$event:e})}function s(){void 0===c.url?c.servicio.obtenerDatos(c.parametros).then(function(e){c.entidades=e,c.ultimaEntidad=void 0!==c.ultimaEntidad?c.ultimaEntidad:c.entidades[0]}):c.servicio.obtenerDatos(c.url).then(function(e){c.entidades=e,c.ultimaEntidad=void 0!==c.ultimaEntidad?c.ultimaEntidad:c.entidades[0]})}var c=this;c.byString=o,c.cargarDatos=s,c.cargarCampos=t,c.onSelect=a,c.getSearchEnabled=n,c.getSearch=e,c.$onInit=function(){i()}}e.module("uiComponents.components").controller("SelectController",n)}(angular);