!function(e){e.module("uiComponents.config",[]).value("uiComponents.config",{debug:!0}),e.module("uiComponents.filters",[]),e.module("uiComponents.components",["ui.grid","ui.grid.exporter","ui.grid.selection","ui.grid.pagination","ui.grid.pinning","ui.grid.moveColumns","ui.grid.edit","ui.grid.rowEdit"]),e.module("uiComponents",["uiComponents.config","uiComponents.components","uiComponents.filters"])}(angular),function(e){"use strict";function i(){return function(i,t){var n=[];if(e.isArray(i)){var o=Object.keys(t);i.forEach(function(e){for(var i=!1,s=0;s<o.length;s++){var d=o[s],a=t[d].toLowerCase();if(-1!==e[d].toString().toLowerCase().indexOf(a)){i=!0;break}}i&&n.push(e)})}else n=i;return n}}e.module("uiComponents.filters").filter("propsFilter",i)}(angular),function(e){"use strict";e.module("uiComponents.filters",[])}(angular),function(e){"use strict";var i={restrict:"E",template:'<div class="myGrid" id="grid1" ui-grid="lrc.optionsEntidades"  ui-grid-exporter  ui-grid-selection  ui-grid-expandable ui-grid-pagination ui-grid-edit  ui-grid-row-edit ui-grid-move-columns ui-grid-pinning ui-grid-resize-columns  bs-loading-overlay></div>',controller:"ListadoEntidadController as lrc",bindings:{selectAll:"=?",deselectedAll:"=?",entidades:"=?",entidadesSeleccionadas:"=?",servicio:"=?",gridOptions:"<",config:"<?",path:"<?",clickItem:"&?",metodos:"=?"}};e.module("uiComponents.components").component("listadoEntidad",i)}(angular),function(e){"use strict";function i(i,t,n,o,s,d,a){function c(){l(m.path,100,void 0,m.config.links)}function l(e,i,t,n){m.servicio.obtenerDatos(e,n,i,t).then(function(e){m.entidades=e,m.optionsEntidades.data=e,m.optionsEntidades.totalItems=m.entidades.length,r()})}function r(){m.selectAll&&(m.gridApi.grid.modifyRows(m.optionsEntidades.data),m.gridApi.selection.selectAllRows())}function u(){console.log(m.optionsEntidades),m.optionsEntidades.onRegisterApi=function(i){m.gridApi=i,i.expandable.on.rowExpandedStateChanged(t,function(i){i.isExpanded&&(i.entity.subGridOptions=e.copy(m.optionsEntidades.subGridColumnDefs),m.servicio.obtenerDatosSubgrilla(i.entity._links[m.config.subGrilla].href).then(function(e){i.entity.subGridOptions.data=e}))}),i.pagination.on.paginationChanged(t,function(){}),i.selection.on.rowSelectionChanged(t,function(){m.entidadesSeleccionadas=i.selection.getSelectedRows(),"undefined"!=typeof m.clickItem&&m.clickItem({$entidad:m.entidadesSeleccionadas,$entidadesSeleccionadas:m.entidadesSeleccionadas})}),i.selection.on.rowSelectionChangedBatch(t,function(){m.entidadesSeleccionadas=i.selection.getSelectedRows(),"undefined"!=typeof m.clickItem&&m.clickItem({$entidad:m.entidadesSeleccionadas,$entidadesSeleccionadas:m.entidadesSeleccionadas})}),p&&n(function(){r()},150)}}var p=!1,m=this;m.selected={},m.deselectedAll=!1,a.setCurrentLang("es"),m.gridApi=null,m.optionsEntidades=e.copy(m.gridOptions),m.metodosInternos=m.metodos||{},m.metodosInternos.actualizarDatos=c,void 0===m.entidades||0===m.entidades.length?l(m.path,100,void 0,m.config.links):(p=!0,m.optionsEntidades.data=m.entidades),u()}e.module("uiComponents.components").controller("ListadoEntidadController",i)}(angular),function(e){"use strict";var i={restrict:"E",template:'<form class="form-horizontal"><small >{{sc.entidad.nombre}}</small><div class="form-group" ng-init="sc.cargarDatos($select)"><ui-select class="btn-group bootstrap-select form-control" ng-model="sc.ultimaEntidad"  title="{{sc.entidad.title}}" on-select="sc.onSelect($item)" append-to-body="true" ><ui-select-match placeholder="{{sc.entidad.placeholder}}" popover-popup-delay="750" uib-popover="{{sc.entidad.toolTip}}" popover-trigger="mouseenter" popover-placement="bottom">{{sc.cargarCampos($select)}}</ui-select-match><ui-select-choices repeat="entidad in sc.entidades | propsFilter: {[sc.entidad.campos[0]]: $select.search}"><div ng-bind-html="entidad[sc.entidad.campos[0]] | highlight: $select.search"></div><small ng-repeat="subcampo in sc.entidad.subcampos">{{subcampo}}: <span ng-bind-html="\'\'+ entidad[subcampo] | highlight: $select.search"></span><!--  email: {{person.email}}age: <span ng-bind-html="\'\'+person.age | highlight: $select.search"></span> --></small></ui-select-choices> </ui-select></div></form>',controller:"SelectController as sc",bindings:{url:"<?",campos:"<?",subcampos:"<?",title:"@",placeholder:"@",servicio:"<?",entidades:"<?",ultimaEntidad:"=?",clickItem:"&?"}};e.module("uiComponents.components").component("selectData",i)}(angular),function(e){"use strict";function i(){function e(e){var i="";if(void 0!==e.selected)for(var t in n.entidad.campos)i+=e.selected[n.entidad.campos[t]],t<n.entidad.campos.length&&(i+=" - ");return i}function i(e){n.clickItem({$event:e})}function t(){n.servicio.obtenerDatos(n.url).then(function(e){n.entidades=e,n.ultimaEntidad=void 0!==n.ultimaEntidad?n.ultimaEntidad:n.entidades[0]})}var n=this;n.cargarDatos=t,n.cargarCampos=e,n.onSelect=i}e.module("uiComponents.components").controller("SelectController",i)}(angular);