!function(e){function i(i){i.decorator("GridOptions",["$delegate","i18nService",function(i,n){var t;return t=e.copy(i),t.initialize=function(e){var n;return n=i.initialize(e)},n.setCurrentLang("es"),t}])}e.module("uiComponents.config",[]).value("uiComponents.config",{debug:!0}).config(i),e.module("uiComponents.filters",[]),e.module("uiComponents.components",["ui.grid","ui.grid.exporter","ui.grid.selection","ui.grid.pagination","ui.grid.pinning","ui.grid.moveColumns","ui.grid.edit","ui.grid.rowEdit"]),e.module("uiComponents",["uiComponents.config","uiComponents.components","uiComponents.filters"])}(angular),function(e){"use strict";function i(){return function(i,n){var t=[];if(e.isArray(i)){var o=Object.keys(n);i.forEach(function(e){for(var i=!1,a=0;a<o.length;a++){var s=o[a],d=n[s].toLowerCase();if(-1!==e[s].toString().toLowerCase().indexOf(d)){i=!0;break}}i&&t.push(e)})}else t=i;return t}}e.module("uiComponents.filters").filter("propsFilter",i)}(angular),function(e){"use strict";e.module("uiComponents.filters",[])}(angular),function(e){"use strict";var i={restrict:"E",template:'<div class="myGrid" id="grid1" ui-grid="lrc.optionsEntidades"  ui-grid-exporter  ui-grid-selection  ui-grid-expandable ui-grid-pagination ui-grid-edit  ui-grid-row-edit ui-grid-move-columns ui-grid-pinning ui-grid-resize-columns  bs-loading-overlay></div>',controller:"ListadoEntidadController as lrc",bindings:{selectAll:"=?",deselectedAll:"=?",entidades:"=?",entidadesSeleccionadas:"=?",servicio:"=?",gridOptions:"<",config:"<?",path:"<?",clickItem:"&?",metodos:"=?"}};e.module("uiComponents.components").component("listadoEntidad",i)}(angular),function(e){"use strict";function i(i,n,t,o,a,s,d){function c(){r(g.path,100,void 0,g.config.links)}function r(e,i,n,t){g.servicio.obtenerDatos(e,t,i,n).then(function(e){g.entidades=e,g.optionsEntidades.data=e,g.optionsEntidades.totalItems=g.entidades.length,l()})}function l(){g.selectAll&&(g.gridApi.grid.modifyRows(g.optionsEntidades.data),g.gridApi.selection.selectAllRows())}function u(){console.log(g.optionsEntidades),g.optionsEntidades.onRegisterApi=function(i){g.gridApi=i,i.expandable.on.rowExpandedStateChanged(n,function(i){i.isExpanded&&(i.entity.subGridOptions=e.copy(g.optionsEntidades.subGridColumnDefs),g.servicio.obtenerDatosSubgrilla(i.entity._links[g.config.subGrilla].href).then(function(e){i.entity.subGridOptions.data=e}))}),i.pagination.on.paginationChanged(n,function(){}),i.selection.on.rowSelectionChanged(n,function(){g.entidadesSeleccionadas=i.selection.getSelectedRows(),"undefined"!=typeof g.clickItem&&g.clickItem({$entidad:g.entidadesSeleccionadas,$entidadesSeleccionadas:g.entidadesSeleccionadas})}),i.selection.on.rowSelectionChangedBatch(n,function(){g.entidadesSeleccionadas=i.selection.getSelectedRows(),"undefined"!=typeof g.clickItem&&g.clickItem({$entidad:g.entidadesSeleccionadas,$entidadesSeleccionadas:g.entidadesSeleccionadas})}),p&&t(function(){l()},150)}}var p=!1,g=this;g.$onInit=function(){g.selected={},g.deselectedAll=!1,d.setCurrentLang("es"),g.gridApi=null,g.optionsEntidades=e.copy(g.gridOptions),g.metodosInternos=g.metodos||{},g.metodosInternos.actualizarDatos=c,void 0===g.entidades||0===g.entidades.length?r(g.path,100,void 0,g.config.links):(p=!0,g.optionsEntidades.data=g.entidades),u()}}e.module("uiComponents.components").controller("ListadoEntidadController",i)}(angular),function(e){"use strict";var i={restrict:"E",template:'<form class="form-horizontal"><small >{{sc.configuracion.nombre}}</small><div class="form-group"><ui-select class="btn-group bootstrap-select form-control" ng-model="sc.ultimaEntidad"  title="{{sc.configuracion.titulo}}" on-select="sc.onSelect($item)" append-to-body="true" ><ui-select-match placeholder="{{sc.configuracion.placeholder}}" popover-popup-delay="750" uib-popover="{{sc.configuracion.toolTip}}" popover-trigger="mouseenter" popover-placement="bottom">{{sc.cargarCampos($select)}}</ui-select-match><ui-select-choices repeat="entidad in sc.entidades | propsFilter: {[sc.configuracion.campos[0]]: $select.search}"><div ng-bind-html="entidad[sc.configuracion.campos[0]] | highlight: $select.search"></div><small ng-repeat="subcampo in sc.configuracion.subcampos">{{subcampo}}: <span ng-bind-html="\'\'+ entidad[subcampo] | highlight: $select.search"></span><!--  email: {{person.email}}age: <span ng-bind-html="\'\'+person.age | highlight: $select.search"></span> --></small></ui-select-choices> </ui-select></div></form>',controller:"SelectController as sc",bindings:{url:"<?",configuracion:"<?",servicio:"<?",parametros:"<?",entidades:"<?",ultimaEntidad:"=?",clickItem:"&?"}};e.module("uiComponents.components").component("selectData",i)}(angular),function(e){"use strict";function i(){function e(){void 0===a.entidades||0===a.entidades.length?o():a.ultimaEntidad=void 0!==a.ultimaEntidad?a.ultimaEntidad:a.entidades[0]}function i(e){var i="";if(void 0!==e.selected){for(var t in a.configuracion.campos)i+=n(e.selected,a.configuracion.campos[t]),i+=" - ";i=i.substr(0,i.length-3)}return i}function n(e,i){i=i.replace(/\[(\w+)\]/g,".$1"),i=i.replace(/^\./,"");for(var n=i.split("."),t=0,o=n.length;o>t;++t){var a=n[t];if(!(a in e))return;e=e[a]}return e}function t(e){a.clickItem({$event:e})}function o(){void 0===a.url?a.servicio.obtenerDatos(a.parametros).then(function(e){a.entidades=e,a.ultimaEntidad=void 0!==a.ultimaEntidad?a.ultimaEntidad:a.entidades[0]}):a.servicio.obtenerDatos(a.url).then(function(e){a.entidades=e,a.ultimaEntidad=void 0!==a.ultimaEntidad?a.ultimaEntidad:a.entidades[0]})}var a=this;a.$onInit=function(){a.cargarDatos=o,a.cargarCampos=i,a.onSelect=t,e()}}e.module("uiComponents.components").controller("SelectController",i)}(angular);